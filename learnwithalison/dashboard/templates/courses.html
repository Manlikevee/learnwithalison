{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% block content %}

<main>

<style>
.course-wrapper-2 {
  padding: 6px;
  position: relative;
  border: 1px solid #f3f3f3;
  background: white;
  border-radius: 4px;
}
.course-desc {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  min-height: 48px;
}
</style>

    <style>
.course-wrapper-2 {
  padding: 6px;
  position: relative;
  border: 1px solid #f3f3f3;
  background: white;
  border-radius: 4px;
  height: 100%;
}

/* ðŸ”¥ FIX: uniform image container */
.student-course-img {
  width: 100%;
  height: 200px;           /* ðŸ‘ˆ fixed height */
  overflow: hidden;
  border-radius: 4px;
}

/* ðŸ”¥ FIX: image fills container */
.student-course-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;       /* ðŸ‘ˆ key line */
  display: block;
}

/* description clamp */
.course-desc {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  min-height: 48px;
}
</style>


<!-- HERO -->
<div class="hero-arera course-item-height"
     data-background="{% static 'images/slider/course-slider.jpg' %}">
  <div class="container">
    <div class="row">
      <div class="col-xl-12">
        <div class="hero-course-1-text">
          <h2>Courses</h2>
        </div>
        <div class="course-title-breadcrumb">
          <nav>
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a href="{% url 'home' %}">Home</a>
              </li>
              <li class="breadcrumb-item active">
                Courses
              </li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- COURSE CONTENT -->
<section class="course-content-area pt-120 pb-90">
  <div class="container">

    <div class="row">

      {% for course in courses %}
      <div class="col-xl-4 col-lg-6 col-md-6">

        <div class="course-wrapper-2 mb-30">

          <!-- IMAGE -->
          <div class="student-course-img">
            {% if course.thumbnail %}
              <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}">
            {% else %}
              <img src="{% static 'images/course/default.jpg' %}" alt="Course">
            {% endif %}
          </div>

          <!-- CARD BODY -->
          <div class="course-cart">
            <div class="course-info-wrapper">
              <div class="cart-info-body">

                <!-- CATEGORY -->
                <span class="category-color category-color-1">
                  {% if course.category %}
                    {{ course.category.name }}
                  {% else %}
                    General
                  {% endif %}
                </span>

                <!-- TITLE -->
                <a href="{% url 'course_detail' course.id %}">
                  <h3>{{ course.title }}</h3>
                </a>

                <!-- DESCRIPTION -->
                <div class="cart-lavel">
                  <h5>
                    Lessons :
                    <span>{{ course.lessons.count }}</span>
                  </h5>
                  <p class="course-desc">
                    {{ course.short_description|default:"No description available." }}
                  </p>
                </div>

                <!-- FEATURES -->
                <div class="info-cart-text">
                  <ul>
                    <li><i class="far fa-check"></i> Lifetime access</li>
                    <li><i class="far fa-check"></i> Certificate</li>
                    <li><i class="far fa-check"></i> Expert instructor</li>
                  </ul>
                </div>

                <!-- ACTION -->
                <div class="course-action">
                  <a href="{% url 'course_detail' course.id %}"
                     class="view-details-btn">
                    View Details
                  </a>
                </div>

              </div>
            </div>
          </div>

          <!-- FOOTER -->
          <div class="student-course-footer">
            <div class="student-course-linkter">

              <div class="course-lessons">
                <i class="far fa-play-circle"></i>
                <span class="ms-2">
                  {{ course.lessons.count }} Lessons
                </span>
              </div>

              <div class="portfolio-price">
                {% if course.price_type == 'free' %}
                  <span>Free</span>
                {% else %}
                  <span>${{ course.price|intcomma }}</span>
                {% endif %}
              </div>

            </div>

            <div class="student-course-text">
              <h3>
                <a href="{% url 'course_detail' course.id %}">
                  {{ course.title }}
                </a>
              </h3>
            </div>

            <div class="portfolio-user">
              <div class="user-icon">
                <i class="fas fa-user"></i>
                {% if course.author.get_full_name %}
                  {{ course.author.get_full_name }}
                {% else %}
                  {{ course.author.username }}
                {% endif %}
              </div>

              <div class="course-icon">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fal fa-star"></i>
                <span>({{ course.level|title }})</span>
              </div>
            </div>

          </div>

        </div>
      </div>

      {% empty %}
      <div class="col-12">
        <div class="alert alert-light text-center">
          No courses available at the moment.
        </div>
      </div>
      {% endfor %}

    </div>
  </div>
</section>

</main>

{% endblock %}
